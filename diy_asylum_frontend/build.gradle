task('npm_install', type:Exec) {
    inputs.files(project.fileTree(dir: "."))
    outputs.dir("${project.buildDir}/node_modules/")
    commandLine 'npm', 'install'
}

task('npm_clean', type:Exec) {
    commandLine 'rm', '-r', "${project.buildDir}/node_modules/"
}

task('npm_test', type:Exec) {
    dependsOn 'npm_install'
    environment "CI", "true"
    commandLine 'npm', 'test'
}

test.dependsOn(':diy_asylum_frontend:npm_test')
clean.dependsOn(':diy_asylum_frontend:npm_clean')
