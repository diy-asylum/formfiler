plugins {
    id "java"
    id "com.diffplug.gradle.spotless" version "3.16.0"
}
spotless {
    format 'misc', {
        target '*.gradle',
                '*.md',
                '.gitignore',
                'diy_asylum_frontend/*.gradle',
                'diy_asylum_frontend/*.md',
                'formfiller/*.gradle',
                'formfiller/*.md'

        trimTrailingWhitespace()
        indentWithSpaces()
        endWithNewline()
    }
    java {
        googleJavaFormat()
    }
    format 'styling', {
        target 'diy_asylum_frontend/src/**/*.css',
                'diy_asylum_frontend/src/**/*.scss'
        prettier().config(['parser': 'css'])
    }
    format 'javascript', {
        target 'diy_asylum_frontend/config/**/*.js',
                'diy_asylum_frontend/public/**/*.js',
                'diy_asylum_frontend/config/**/*.js',
                'diy_asylum_frontend/scripts/**/*.js',
                'diy_asylum_frontend/src/**/*.js'
        prettier().config(['parser': 'babylon'])
    }
}

project.tasks.test.dependsOn(':diy_asylum_frontend:npm_test')
